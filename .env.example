# ==============================================================================
# OpenChat Environment Configuration
# ==============================================================================
# Copy this file to .env.local and fill in your values

# ==============================================================================
# REQUIRED: Authentication
# ==============================================================================
# better-auth secret for session encryption
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=CHANGE_ME_USE_OPENSSL_RAND_BASE64_32

# ==============================================================================
# REQUIRED: Convex (Backend Database, Realtime Sync & Auth Sessions)
# ==============================================================================
# For Cloud-Hosted Convex:
# Get these from: bunx convex dev (local) or your Convex dashboard (production)
# Convex stores ALL data: users, chats, messages, AND auth sessions
# CONVEX_URL=https://your-project.convex.cloud
# NEXT_PUBLIC_CONVEX_URL=https://your-project.convex.cloud

# For Self-Hosted Convex (Docker):
# IMPORTANT: Understand the difference between these two URLs:
#
# CONVEX_URL: Server-to-server (Docker internal network)
#   - Local dev: http://localhost:3210
#   - Production: http://backend:3210 (Docker service name, NOT https://)
#
# NEXT_PUBLIC_CONVEX_URL: Browser-to-server (public internet)
#   - Local dev: http://localhost:3210
#   - Production: https://api.yourdomain.com (public URL with reverse proxy)

# Local Development
CONVEX_URL=http://localhost:3210
NEXT_PUBLIC_CONVEX_URL=http://localhost:3210

# Production Example (uncomment and modify):
# CONVEX_URL=http://backend:3210
# NEXT_PUBLIC_CONVEX_URL=https://api.osschat.dev

# Self-hosted admin key (generate with: docker compose exec backend ./generate_admin_key.sh)
# CONVEX_SELF_HOSTED_URL=http://backend:3210
# CONVEX_SELF_HOSTED_ADMIN_KEY=your_admin_key_here

# ==============================================================================
# REQUIRED: Public URLs
# ==============================================================================
# Web app URL (frontend)
NEXT_PUBLIC_APP_URL=http://localhost:3001

# API server URL (backend) - used for auth API routes
NEXT_PUBLIC_SERVER_URL=http://localhost:3000
SITE_URL=http://localhost:3001

# ==============================================================================
# Optional: Convex Deployment (Production)
# ==============================================================================
# For production deployments to Convex
# CONVEX_DEPLOYMENT=prod:your-deployment-name
# CONVEX_ADMIN_URL=https://your-project.convex.cloud
# CONVEX_SITE_URL is generated automatically by Convex for self-hosted setups

# ==============================================================================
# Optional: Analytics (PostHog)
# ==============================================================================
# NEXT_PUBLIC_POSTHOG_KEY=your_posthog_key
# NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com
# POSTHOG_API_KEY=your_server_key
# POSTHOG_HOST=https://us.i.posthog.com

# ==============================================================================
# Optional: Advanced Configuration
# ==============================================================================
# Server-to-server internal URL (optional)
# SERVER_INTERNAL_URL=http://localhost:3000

# better-auth base URL (optional, defaults to SERVER_INTERNAL_URL or NEXT_PUBLIC_SERVER_URL)
# BETTER_AUTH_URL=http://localhost:3000

# Cross-subdomain cookie domain (optional, for sharing auth between subdomains)
# AUTH_COOKIE_DOMAIN=.yourdomain.com

# ==============================================================================
# Development Only: Auth Bypass
# ==============================================================================
# WARNING: NEVER set these to 1 in production!
NEXT_PUBLIC_DEV_BYPASS_AUTH=0
NEXT_PUBLIC_DEV_USER_ID=dev-user
