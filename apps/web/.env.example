# ============================================================================
# OpenChat Web App - Environment Variables
# ============================================================================
# This file documents all environment variables used in the OpenChat web app.
# Copy this to .env.local and fill in the values.
#
# SECURITY: Never commit .env.local to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# Required - Core Configuration
# ----------------------------------------------------------------------------

# Public application URL (where your app is hosted)
# Used for OAuth redirects, CORS, and authentication
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Backend server URL (where the API is hosted)
NEXT_PUBLIC_SERVER_URL=http://localhost:3000

# Convex backend URL
# Get this from your Convex dashboard: https://dashboard.convex.dev
NEXT_PUBLIC_CONVEX_URL=http://localhost:3210

# ----------------------------------------------------------------------------
# Required in Production - API Keys
# ----------------------------------------------------------------------------

# OpenRouter API key for LLM access
# Get your key at: https://openrouter.ai/keys
# REQUIRED in production
OPENROUTER_API_KEY=

# ----------------------------------------------------------------------------
# Optional - Additional URLs
# ----------------------------------------------------------------------------

# Convex deployment URL (server-side)
# Usually same as NEXT_PUBLIC_CONVEX_URL
CONVEX_URL=

# Convex site URL (for deployed functions)
NEXT_PUBLIC_CONVEX_SITE_URL=

# Internal server URL (for server-to-server calls)
# Used for improved performance in production
SERVER_INTERNAL_URL=
INTERNAL_SERVER_URL=
SERVER_DIRECT_URL=

# ----------------------------------------------------------------------------
# Optional - Database
# ----------------------------------------------------------------------------

# PostgreSQL database connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=

# ----------------------------------------------------------------------------
# Optional - Redis (for distributed rate limiting)
# ----------------------------------------------------------------------------

# Redis connection URL
# Format: redis://localhost:6379
# If not set, uses in-memory rate limiting
REDIS_URL=

# Upstash Redis (alternative to self-hosted Redis)
# Get from: https://console.upstash.com/
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ----------------------------------------------------------------------------
# Optional - Analytics & Monitoring
# ----------------------------------------------------------------------------

# PostHog analytics (client-side)
# Get from: https://app.posthog.com/project/settings
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# PostHog analytics (server-side)
POSTHOG_API_KEY=
POSTHOG_HOST=https://us.i.posthog.com
POSTHOG_DEPLOYMENT=local
POSTHOG_ENVIRONMENT=development
POSTHOG_DEPLOYMENT_REGION=local

# Sentry error tracking
# Get from: https://sentry.io/settings/
SENTRY_DSN=
NEXT_PUBLIC_SENTRY_DSN=

# ----------------------------------------------------------------------------
# Optional - WorkOS AuthKit
# ----------------------------------------------------------------------------
# WorkOS provides enterprise SSO and authentication
# Get your credentials at: https://dashboard.workos.com
# Documentation: https://workos.com/docs/authkit

# WorkOS Client ID (starts with "client_")
WORKOS_CLIENT_ID=

# WorkOS API Key (starts with "sk_test_" for test mode or "sk_" for live mode)
WORKOS_API_KEY=

# WorkOS Redirect URI (must match the redirect URI configured in WorkOS dashboard)
# For local development: http://localhost:3000/api/auth/callback
# For production: https://your-domain.com/api/auth/callback
WORKOS_REDIRECT_URI=http://localhost:3000/api/auth/callback

# WorkOS Redirect URI (public - required by AuthKit client-side SDK)
# Must have the same value as WORKOS_REDIRECT_URI
NEXT_PUBLIC_WORKOS_REDIRECT_URI=http://localhost:3000/api/auth/callback

# WorkOS Cookie Password (for encrypting session cookies)
# Generate with: openssl rand -base64 32
WORKOS_COOKIE_PASSWORD=

# ----------------------------------------------------------------------------
# Optional - Authentication Configuration
# ----------------------------------------------------------------------------

# Cookie domain (auto-detected from NEXT_PUBLIC_APP_URL if not set)
AUTH_COOKIE_DOMAIN=

# ----------------------------------------------------------------------------
# Optional - Development Tools
# ----------------------------------------------------------------------------

# Bypass authentication in development (0 or 1)
# WARNING: Never set to 1 in production!
NEXT_PUBLIC_DEV_BYPASS_AUTH=0

# Development user ID (when bypass auth is enabled)
NEXT_PUBLIC_DEV_USER_ID=

# Electric SQL sync URL (experimental)
NEXT_PUBLIC_ELECTRIC_URL=

# ----------------------------------------------------------------------------
# Optional - Deployment Metadata
# ----------------------------------------------------------------------------

# App version (auto-set in CI/CD)
NEXT_PUBLIC_APP_VERSION=
APP_VERSION=

# Deployment environment name
NEXT_PUBLIC_DEPLOYMENT=local
DEPLOYMENT=local

# Node environment
NODE_ENV=development

# ----------------------------------------------------------------------------
# Optional - Vercel-specific (auto-set by Vercel)
# ----------------------------------------------------------------------------

VERCEL_ENV=
VERCEL_REGION=
VERCEL_GIT_COMMIT_SHA=

# ----------------------------------------------------------------------------
# Optional - CORS Configuration
# ----------------------------------------------------------------------------

# Allowed CORS origin (defaults to NEXT_PUBLIC_APP_URL)
CORS_ORIGIN=

# ----------------------------------------------------------------------------
# Optional - Cache Configuration
# ----------------------------------------------------------------------------

# Chat prefetch cache time-to-live in milliseconds
# Default: 60000 (1 minute)
NEXT_PUBLIC_CHAT_PREFETCH_TTL_MS=60000

# Maximum number of chats to cache
# Default: 50
NEXT_PUBLIC_CHAT_PREFETCH_MAX_SIZE=50

# Model list cache time-to-live in milliseconds
# Default: 600000 (10 minutes)
NEXT_PUBLIC_MODEL_CACHE_TTL_MS=600000

# ----------------------------------------------------------------------------
# Optional - Rate Limiting Configuration
# ----------------------------------------------------------------------------

# Chat creation rate limit (requests per window)
# Default: 10
CHAT_CREATE_RATE_LIMIT=10

# Chat creation rate limit window (milliseconds)
# Default: 60000 (1 minute)
CHAT_CREATE_WINDOW_MS=60000

# Auth endpoint rate limit (requests per window)
# Default: 30 (production), 1000 (development)
AUTH_RATE_LIMIT=30

# Auth rate limit window (milliseconds)
# Default: 60000 (1 minute)
AUTH_RATE_WINDOW_MS=60000

# ----------------------------------------------------------------------------
# Optional - OpenRouter Configuration
# ----------------------------------------------------------------------------

# OpenRouter API base URL
# Default: https://openrouter.ai/api/v1
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Rate limit per minute for OpenRouter requests
# Default: 30
OPENROUTER_RATE_LIMIT_PER_MIN=30

# Maximum number of rate limit buckets to track
# Default: 1000
OPENROUTER_RATE_LIMIT_TRACKED_BUCKETS=1000

# Maximum characters in user message parts
# Default: 8000
OPENROUTER_MAX_USER_CHARS=8000

# Stream flush interval in milliseconds
# Default: 80
OPENROUTER_STREAM_FLUSH_INTERVAL_MS=80

# Minimum characters per flush
# Default: 24
OPENROUTER_STREAM_MIN_CHARS_PER_FLUSH=24

# Stream delay in milliseconds (set to "null" to disable)
# Default: 12
OPENROUTER_STREAM_DELAY_MS=12

# Maximum tokens per request
# Default: 8192
OPENROUTER_MAX_TOKENS=8192

# Request timeout in milliseconds
# Default: 60000 (1 minute)
OPENROUTER_TIMEOUT_MS=60000

# ----------------------------------------------------------------------------
# Optional - Message Limits (Security)
# ----------------------------------------------------------------------------

# Maximum messages per request
# Default: 100
MAX_MESSAGES_PER_REQUEST=100

# Maximum request body size in bytes
# Default: 10000000 (10MB)
MAX_REQUEST_BODY_SIZE=10000000

# Maximum attachment size in bytes
# Default: 5000000 (5MB)
MAX_ATTACHMENT_SIZE=5000000

# Maximum message content length in characters
# Default: 50000
MAX_MESSAGE_CONTENT_LENGTH=50000
