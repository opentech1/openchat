# ──────────────────────────────────────────────────────────────
# OpenChat – Dokploy environment template
# Copy these into Dokploy's Environment panel. Dokploy uses the
# same key/value list for Docker build args and runtime env, so
# keep the values consistent. Replace the placeholder domains and
# secrets with your production values.
# ──────────────────────────────────────────────────────────────

# === Clerk authentication (required in production)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_live_replace_me
CLERK_PUBLISHABLE_KEY=pk_live_replace_me
CLERK_SECRET_KEY=sk_live_replace_me
SKIP_CLERK_BUILD_CHECK=0

# === Browser-visible endpoints (must be public HTTPS URLs)
# Web UI is served by Next.js (Traefik route → container port 3001)
NEXT_PUBLIC_APP_URL=https://app.example.com
# API URL that the web bundle calls from the browser (Traefik → port 3000)
NEXT_PUBLIC_SERVER_URL=https://api.example.com
# Optional Electric SQL proxy exposed publicly (Traefik → port 3010).
# Leave empty to disable Electric-powered live sync on the client.
NEXT_PUBLIC_ELECTRIC_URL=https://electric.example.com

# === Internal service URLs (private to the container)
SERVER_INTERNAL_URL=http://127.0.0.1:3000
ELECTRIC_SERVICE_URL=http://127.0.0.1:3010

# === CORS / proxy awareness
# Set to your public web domain so Bun replies with proper CORS headers.
CORS_ORIGIN=https://app.example.com
# Tell the API to trust x-forwarded-* headers coming from Traefik.
TRUST_PROXY_FORWARDED=1

# === Electric SQL security
ELECTRIC_GATEKEEPER_SECRET=replace-with-long-random-string
PG_PROXY_PASSWORD=replace-with-long-random-string
ELECTRIC_INSECURE=false
ELECTRIC_LOG_LEVEL=info

# === Database configuration (Postgres runs inside the container)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=replace-with-strong-password
POSTGRES_DB=openchat
POSTGRES_SHADOW_DB=openchat_shadow
POSTGRES_PORT=5432
PGDATA=/var/lib/postgresql/data

# === Application listening ports (normally leave as defaults)
HOST=0.0.0.0
SERVER_PORT=3000
WEB_PORT=3001
ELECTRIC_HTTP_PORT=3010
ELECTRIC_PROXY_PORT=5133

# === OpenRouter secrets (replace before going live)
OPENROUTER_API_KEY_SECRET=replace-with-32-char-secret

# === Optional dev bypass (keep disabled in production)
NEXT_PUBLIC_DEV_BYPASS_AUTH=0
NEXT_PUBLIC_DEV_USER_ID=

# === Optional internal overrides (leave blank unless needed)
SERVER_INTERNAL_WS_URL=
