# Production environment reference for Dokploy
# Copy these values into the Dokploy Environment tab and replace placeholders.

# --- Postgres ---------------------------------------------------------------
POSTGRES_USER=openchat
POSTGRES_PASSWORD=replace-with-strong-password
POSTGRES_DB=openchat
DATABASE_URL=postgresql://openchat:replace-with-strong-password@openchat-postgres:5432/openchat
SHADOW_DATABASE_URL=postgresql://openchat:replace-with-strong-password@openchat-postgres:5432/openchat_shadow

# --- ElectricSQL ------------------------------------------------------------
# Generate secrets with: openssl rand -base64 48 | tr -d '\n'
PG_PROXY_PASSWORD=replace-with-generated-secret
ELECTRIC__PG_PROXY__PASSWORD=replace-with-generated-secret
ELECTRIC_SECRET=replace-with-generated-secret
ELECTRIC_GATEKEEPER_SECRET=replace-with-generated-secret
# Set to true only if Electric is served over plain HTTP inside the Docker network.
ELECTRIC_INSECURE=false
ELECTRIC_LOG_LEVEL=info
ELECTRIC_HTTP_PORT=3000
ELECTRIC__HTTP__PORT=3000
ELECTRIC__HTTP__HOST=0.0.0.0
ELECTRIC__PG_PROXY__PORT=5133
ELECTRIC__PG_PROXY__HOST=0.0.0.0
ELECTRIC_SERVICE_URL=http://openchat-electric:3000

# --- API / Auth -------------------------------------------------------------
BETTER_AUTH_SECRET=replace-with-generated-secret
BETTER_AUTH_URL=https://api.ochat.pro
SERVER_INTERNAL_URL=http://openchat-server:3000
CORS_ORIGIN=https://ochat.pro
AUTH_COOKIE_DOMAIN=.ochat.pro
OPENROUTER_API_KEY_SECRET=your-openrouter-key-or-empty

# --- Frontend ---------------------------------------------------------------
NEXT_PUBLIC_APP_URL=https://ochat.pro
NEXT_PUBLIC_SERVER_URL=https://api.ochat.pro
NEXT_PUBLIC_ELECTRIC_URL=https://electric.ochat.pro

# --- PostHog Analytics ------------------------------------------------------
POSTHOG_API_KEY=replace-with-posthog-server-key
POSTHOG_HOST=https://us.i.posthog.com
NEXT_PUBLIC_POSTHOG_KEY=replace-with-posthog-client-key
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# --- Backups (Cloudflare R2) ------------------------------------------------
# R2 uses S3-compatible credentials. Generate them in the Cloudflare dashboard.
R2_ACCOUNT_ID=replace-with-r2-account-id
R2_ACCESS_KEY_ID=replace-with-access-key
R2_SECRET_ACCESS_KEY=replace-with-secret-key
R2_BUCKET=openchat-backups
R2_PREFIX=prod/db
# Required so AWS SDK uses path-style URLs for R2
AWS_S3_FORCE_PATH_STYLE=true

# --- Runtime toggles --------------------------------------------------------
RUN_DB_MIGRATIONS=1
POSTGRES_WAIT_TIMEOUT=120000
POSTGRES_WAIT_INTERVAL=2000
